!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["hp-validate"]=t():e["hp-validate"]=t()}(this,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{validate:()=>w,validateAll:()=>j});const r=new RegExp(/^(13[0-9]|14[01456879]|15[0-3,5-9]|16[2567]|17[0-8]|18[0-9]|19[0-3,5-9])d{8}$/),a=new RegExp(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-]{2,3}){1,2}$/),n=new RegExp(/^[1-8][1-7]\d{4}(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/),i=new RegExp(/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/),s=new RegExp(/^(?!\d+$)(?![a-zA-Z]+$)(?![^a-zA-Z0-9]+$)\S{8,}$/),o=(e,t)=>{const r=d(t,e),a={validate:r,message:""};return r||(a.message=`${t} Not a ${e}`),a},l=(e,t,r)=>{const a=e.test(t),n={validate:a,message:""};return a||(n.message=r),n},c={is_any:()=>({validate:!0}),is_string:e=>o("string",e),is_number:e=>o("number",e),is_object:e=>o("object",e),is_array:e=>o("array",e),is_boolean:e=>o("boolean",e),is_function:e=>o("function",e),is_date:e=>o("date",e),is_null:e=>o("null",e),is_undefined:e=>o("undefined",e),is_nan:e=>o("nan",e),is_regexp:e=>o("regexp",e),is_email:e=>l(a,e,"邮箱格式不正确"),is_mobile:e=>l(r,e,"手机号码格式不正确"),is_id:e=>l(n,e,"身份证号码格式不正确"),is_carCode:e=>l(i,e,"车牌号码格式不正确"),is_password:e=>l(s,e,"密码格式不正确")},u={min:-1/0,max:1/0,type:"any",length:1/0,integer:!1,decimal:1/0,validator:null,regExp:null},d=(e,t)=>{const r=Object.prototype.toString.call(e);return t?r.slice(8,-1).toLocaleLowerCase()===t:r.slice(8,-1).toLocaleLowerCase()},g=e=>{const t=d(e);return["array","object","function","regexp"].includes(t)},p=(e,t)=>f("The rule format is incorrect","",e,t),f=(e,t,r,a)=>{const n={validate:!1,errors:[]};return d(e,"array")?n.errors=e:d(e,"string")&&n.errors.push({message:e,key:t,value:r}),d(a,"function")?a(n):(n.errors.forEach((e=>{e.hasOwnProperty("key")&&""===e.key.trim()&&delete e.key})),Promise.resolve(n))},y=e=>{const t={validate:!0,errors:[]};return"function"==typeof e?e(t):Promise.resolve(t)},m=async(e,t="",r,a)=>{const n=[];if(0===e.length)return y(a);const i=[];if(e.map((async e=>{d(e,"object")&&i.push(h(e,t,r)),d(e,"function")&&i.push(v(e,t,r)),d(e,"regexp")&&i.push(await b(e,t,r))})),i.length>0){const e=await Promise.all(i);let t=0;const r=e.length;for(;t<r;){const{validate:r,errors:a}=e[t];r||n.push(...a),t++}}return n.length>0?f(n,"",r,a):y(a)},h=async(e,t,r,a)=>{const{type:n,length:i,min:s,max:o,integer:l,decimal:g,message:p,validator:m,regExp:h}=Object.assign({},u,e),v=async(e="",t,r)=>{const{errors:a}=await f(r,e,t);b.errors.push(...a)},b={errors:[],validate:!0};if(d(c["is_"+n],"function")){const e=c["is_"+n](r);e.validate||await v(t,r,p||e.message)}if((e.min||e.max)&&c.is_number(r).validate){const e=((e,t,r)=>t<=e&&e<=r)(r,s,o);e||await v(t,r,p)}var _;if(l&&(_=r,!Number.isInteger(_))&&await v(t,r,p),l||((e,t)=>!Number.isFinite(t)||("string"==typeof e?e:String(e)).split(".").length<=t)(r,g)||await v(t,r,p),((e,t)=>!Number.isFinite(t)||("string"==typeof e?e:String(e)).length<=t)(r,i)||await v(t,r,p),d(m,"function"))try{await m(e,r)}catch(e){await v(t,r,e||p)}return d(h,"regexp")&&!h.test(h)&&await v(t,r,p),b.validate=0===b.errors.length,b.validate?y(a):f(b.errors,t,r,a)},v=async(e,t,r,a)=>{try{return await e(r),y(a)}catch(e){const n=d(e,"string")?e:e.message;return f(n,t,r,a)}},b=(e,t="",r,a)=>e.test(r)?y(a):f([{message:"",key:t,value:r}],"",r,a),_=(e,t,r)=>{if(g(e)){if(d(e,"function"))return v(e,t,r);if(d(e,"object"))return h(e,t,r);if(d(e,"regexp"))return b(e,t,r);if(d(e,"array"))return m(e,t,r)}},w=(e,t,r)=>{const a=d(e);return g(e)?x(a,e,t,r):p(t,r)},x=(e,t,r,a)=>"array"===e?m(t,"",r,a):"regexp"===e?b(t,"",r,a):"object"===e?h(t,"",r,a):"function"===e?v(t,"",r,a):void 0,j=(e,t,r)=>((e,t)=>d(e,"object")&&(d(t,"object")||d(t,"array")))(e,t)?(async(e,t,r)=>{const a={errors:[],validate:!0},n=[];if(d(t,"array")&&t.length>0){const r=t.length;let a=0;for(;a<r;){const{key:r,value:i}=t[a];n.push(_(e[r],r,i)),a++}}if(d(t,"object"))for(const r in t)n.push(_(e[r],r,t[r]));if(n.length>0){const e=await Promise.all(n);e&&e.length>0&&e.map((({validate:e,errors:t})=>{e||a.errors.push(...t)}))}return a.validate=0===a.errors.length,a.validate?y(r):f(a.errors,"",t,r)})(e,t,r):p(t,r);return t})()}));