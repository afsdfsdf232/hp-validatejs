!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["hp-validate"]=t():e["hp-validate"]=t()}(this,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{debounce:()=>l,deepClone:()=>u,deepMerge:()=>p,pick:()=>s,queryParams:()=>c,targetType:()=>r,timeFormat:()=>A,timeFrom:()=>Z,validate:()=>j,validateAll:()=>x});const r=(e,t)=>{const r=Object.prototype.toString.call(e);return t?r.slice(8,-1).toLocaleLowerCase()===t:r.slice(8,-1).toLocaleLowerCase()},n=(e,t,n)=>{if("even"===t){const t=["array","object","function","regexp"],n=r(e);return console.log("currentType:",n),t.includes(n)}if("odd"===t)return r(e,"object")&&(r(n,"object")||r(n,"array"))},o=(e,t)=>a("The rule format is incorrect","",e,t),a=(e,t,n,o)=>{const a={validate:!1,errors:[]};return r(e,"array")?a.errors=e:r(e,"string")&&a.errors.push({message:e,key:t,value:n}),r(o,"function")?o(a):(a.errors.forEach((e=>{e.hasOwnProperty("key")&&""===e.key.trim()&&delete e.key})),Promise.resolve(a))},i=e=>{const t={validate:!0,errors:[]};return"function"==typeof e?e(t):Promise.resolve(t)},s=(e,t,n)=>{if(r(e,"object")&&r(t,"array")){const o={};if(t.map((t=>{e.hasOwnProperty(t)&&(o[t]=e[t])})),r(n,"object"))for(const e in n)o.hasOwnProperty(e)&&(o[n[e]]=o[e],delete o[e]);return o}return e},c=e=>{const t=decodeURIComponent(e.split("?")[1]).replace(/\+/g," ");if(!t)return{};const r={};return t.split("&").forEach((e=>{const t=e.indexOf("=");if(-1!==t){const n=e.substring(0,t),o=e.substring(t+1,e.length);r[n]=o}})),r},l=(e,t,r)=>{let n,o,a,i,s;const c=function(){const l=+new Date-i;l<t&&l>0?n=setTimeout(c,t-l):(n=null,r||(s=e.apply(a,o),n||(a=o=null)))};return function(...o){a=this,i=+new Date;const l=r&&!n;return n||(n=setTimeout(c,t)),l&&(s=e.apply(a,o),a=o=null),s}},u=e=>{if([null,void 0,NaN,!1].includes(e))return e;if("object"!=typeof e&&"function"!=typeof e)return e;const t=r(e,"array")?[]:{};for(const r in e)e.hasOwnProperty(r)&&(t[r]="object"==typeof e[r]?u(e[r]):e[r]);return t},p=(e={},t={})=>{if("object"!=typeof(e=u(e))||"object"!=typeof t)return!1;for(var r in t)t.hasOwnProperty(r)&&(r in e?"object"!=typeof e[r]||"object"!=typeof t[r]?e[r]=t[r]:e[r].concat&&t[r].concat?e[r]=e[r].concat(t[r]):e[r]=p(e[r],t[r]):e[r]=t[r]);return e},g=new RegExp(/^(13[0-9]|14[01456879]|15[0-3,5-9]|16[2567]|17[0-8]|18[0-9]|19[0-3,5-9])d{8}$/),f=new RegExp(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-]{2,3}){1,2}$/),d=new RegExp(/^[1-8][1-7]\d{4}(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/),y=new RegExp(/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/),m=new RegExp(/^(?!\d+$)(?![a-zA-Z]+$)(?![^a-zA-Z0-9]+$)\S{8,}$/),b=new RegExp(/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/),h=(e,t)=>{const n=r(t,e),o={validate:n,message:""};return n||(o.message=`${t} Not a ${e}`),o},w=(e,t,r)=>{const n=e.test(t),o={validate:n,message:""};return n||(o.message=r),o},v={is_any:()=>({validate:!0}),is_string:e=>h("string",e),is_number:e=>h("number",e),is_object:e=>h("object",e),is_array:e=>h("array",e),is_boolean:e=>h("boolean",e),is_function:e=>h("function",e),is_date:e=>h("date",e),is_null:e=>h("null",e),is_undefined:e=>h("undefined",e),is_nan:e=>h("nan",e),is_regexp:e=>h("regexp",e),is_email:e=>w(f,e,"邮箱格式不正确"),is_mobile:e=>w(g,e,"手机号码格式不正确"),is_id:e=>w(d,e,"身份证号码格式不正确"),is_carCode:e=>w(y,e,"车牌号码格式不正确"),is_password:e=>w(m,e,"密码格式不正确"),is_url:e=>w(b,e,"路径格式不正确")},S={min:-1/0,max:1/0,type:"any",length:1/0,integer:!1,decimal:1/0,validator:null,regExp:null},_=(e,t,o,s)=>{if(n(e,"even")){if(r(e,"function"))return(async(e,t,n,o)=>{try{return await e(n),i(o)}catch(e){const i=r(e,"string")?e:e.message;return a(i,t,n,o)}})(e,t,o,s);if(r(e,"object"))return(async(e,t,n,o)=>{const{type:s,length:c,min:l,max:u,integer:p,decimal:g,message:f,validator:d,regExp:y}=Object.assign({},S,e),m=async(e="",t,r)=>{const{errors:n}=await a(r,e,t);b.errors.push(...n)},b={errors:[],validate:!0};if(r(v["is_"+s],"function")){const e=v["is_"+s](n);e.validate||await m(t,n,f||e.message)}if((e.min||e.max)&&v.is_number(n).validate){const e=((e,t,r)=>t<=e&&e<=r)(n,l,u);e||await m(t,n,f)}var h;if(p&&(h=n,!Number.isInteger(h))&&await m(t,n,f),p||((e,t)=>!Number.isFinite(t)||("string"==typeof e?e:String(e)).split(".").length<=t)(n,g)||await m(t,n,f),((e,t)=>!Number.isFinite(t)||("string"==typeof e?e:String(e)).length<=t)(n,c)||await m(t,n,f),r(d,"function"))try{await d(e,n)}catch(e){const o=r(e,"string")?e:e.message;await m(t,n,o||f)}return r(y,"regexp")&&!y.test(y)&&await m(t,n,f),b.validate=0===b.errors.length,b.validate?i(o):a(b.errors,t,n,o)})(e,t,o,s);if(r(e,"regexp"))return((e,t="",r,n)=>e.test(r)?i(n):a([{message:"",key:t,value:r}],"",r,n))(e,t,o,s);if(r(e,"array"))return(async(e,t="",r,n)=>{const o=[];if(0===e.length)return i(n);const s=[];if(e.map((async e=>{s.push(_(e,t,r))})),s.length>0){const e=await Promise.all(s);let t=0;const r=e.length;for(;t<r;){const{validate:r,errors:n}=e[t];r||o.push(...n),t++}}return o.length>0?a(o,"",r,n):i(n)})(e,t,o,s)}},j=(e,t,r)=>n(e,"even")?_(e,"",t,r):o(t,r),x=(e,t,s)=>n(e,"odd",t)?(async(e,t,n)=>{const o={errors:[],validate:!0},s=[];if(r(t,"array")&&t.length>0){const r=t.length;let n=0;for(;n<r;){const{key:r,value:o}=t[n];s.push(_(e[r],r,o)),n++}}if(r(t,"object"))for(const r in t)s.push(_(e[r],r,t[r]));if(s.length>0){const e=await Promise.all(s);e&&e.length>0&&e.map((({validate:e,errors:t})=>{e||o.errors.push(...t)}))}return o.validate=0===o.errors.length,o.validate?i(n):a(o.errors,"",t,n)})(e,t,s):o(t,s);function A(e=null,t="yyyy-mm-dd"){e||(e=Number(new Date)),10===e.toString().length&&(e*=1e3);const r=new Date(Number(e));let n;const o={"y+":r.getFullYear().toString(),"m+":(r.getMonth()+1).toString(),"d+":r.getDate().toString(),"h+":r.getHours().toString(),"M+":r.getMinutes().toString(),"s+":r.getSeconds().toString()};for(const e in o)n=new RegExp("("+e+")").exec(t),n&&(t=t.replace(n[1],1===n[1].length?o[e]:o[e].padStart(n[1].length,"0")));return t}function Z(e=null,t="yyyy-mm-dd"){e||(e=Number(new Date)),10===e.toString().length&&(e*=1e3);const r=+new Date(Number(e)),n=(Number(new Date)-r)/1e3;let o="";switch(!0){case n<300:o="刚刚";break;case n>=300&&n<3600:o=parseInt(n/60)+"分钟前";break;case n>=3600&&n<86400:o=parseInt(n/3600)+"小时前";break;case n>=86400&&n<2592e3:o=parseInt(n/86400)+"天前";break;default:o=!1===t?n>=2592e3&&n<31536e3?parseInt(n/2592e3)+"个月前":parseInt(n/31536e3)+"年前":A(r,t)}return o}return String.prototype.padStart||(String.prototype.padStart=function(e,t=" "){if("[object String]"!==Object.prototype.toString.call(t))throw new TypeError("fillString must be String");const r=this;if(r.length>=e)return String(r);const n=e-r.length;let o=Math.ceil(n/t.length);for(;o>>=1;)t+=t,1===o&&(t+=t);return t.slice(0,n)+r}),t})()}));